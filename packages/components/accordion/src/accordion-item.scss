:host {
  --_background: var(--sl-color-tab-default-background);
  --_focus-outline: var(--sl-color-focusring-default) solid var(--sl-border-width-focusring-default);
  --_focus-outline-offset: var(--sl-border-width-focusring-offset);
}

:host {
  display: flex;
  list-style: none;
}

:host([disabled]) {
  summary {
    //background-color: #c6c6c6;
    color: #c6c6c6;
  }
}

//:host(:hover) {
//  background-color: var(--sl-color-select-item-hover-background);
//}

details {
  border-bottom: 1px solid #c6c6c6; // TODO: change to box-shadow because of focus visible border radius???
  flex: 1;
}

details > summary:first-of-type {
  list-style: none;
}

details > summary:first-of-type::-webkit-details-marker {
  display: none; /* Hides the arrow in Safari */
}

//// On click
//// Change to: "02";
//// Animate: Smart animate;
//animation-timing-function: cubic-bezier(0.7, -0.4, 0.4, 1.4);
//animation-duration: 300ms;

//transition: all 300ms cubic-bezier(0.7, -0.4, 0.4, 1.4);

// On click
// Change to: "minus";
// Animate: Smart animate;
//animation-timing-function: cubic-bezier(0.6, 2, 0.6, 1);
//animation-duration: 300ms;

//transition: all 300ms cubic-bezier(0.6, 2, 0.6, 1);

summary {
  background-color: var(--_background);
  //border-bottom: 1px solid #c6c6c6; // TODO: change to box-shadow because of focus visible border radius???
  cursor: pointer;
  display: flex;
  gap: 8px;
  padding: 8px;
  transition: background 300ms;
  //transition: background 300ms, transform 400ms;
  //transition: transform 400ms;
  z-index: 1;

  &:hover {
    background-color: var(--sl-color-select-item-hover-background); // TODO: not disabled
  }

  &:focus-visible {
    border-radius: 4px; // TODO: change this one in the future
    outline: var(--_focus-outline);
    outline-offset: var(--_focus-outline-offset);
    position: relative;
  }

  sl-icon {
    inset: 0;
    position: absolute;
    //transition: transform 200ms;
    transition: all 300ms cubic-bezier(0.6, 2, 0.6, 1); // opacity instead of all?
  }
}

.panel {
  //transition: transform 300ms ease-in-out, opacity 300ms ease-in-out;
  padding: 16px;
  position: relative;
  transform-origin: top;
  /* stylelint-disable-next-line property-no-vendor-prefix */
  //-webkit-transition: transform 300ms cubic-bezier(0.7, -0.4, 0.4, 1.4);
  transition: transform 300ms cubic-bezier(0.7, -0.4, 0.4, 1.4);
}

details {
  // details:not([open])
  .panel {
    opacity: 0;
    //padding: 16px;
    transform: scaleY(0);
    //transform-origin: top;
    //transition: transform 300ms ease;
  }
}

//details[open] {
//  .panel {
//    animation: slideDown 200ms linear;
//  }
//}

//details summary > * {
//  display: inline;
//}

//@keyframes flipdown {
//  0% {
//    opacity: 0;
//    transform-origin: top center;
//    transform: rotateX(-90deg);
//  }
//  5% {
//    opacity: 1;
//  }
//  80% {
//    transform: rotateX(8deg);
//  }
//  83% {
//    transform: rotateX(6deg);
//  }
//  92% {
//    transform: rotateX(-3deg);
//  }
//  100% {
//    transform-origin: top center;
//    transform: rotateX(0deg);
//  }
//}

//@keyframes slideDown {
//  0% {
//    opacity: 0.5;
//    transform: translateY(-10px);
//  }
//
//  50% {
//    opacity: 0.8;
//    transform: translateY(-5px);
//  }
//
//  100% {
//    opacity: 1;
//    transform: translateY(0);
//  }
//}

@keyframes details-show {
  from {
    opacity: 0;
    transform: var(--details-translate, translateY(-0.5em));
  }
}

//details[open] > *:not(summary) {
//  animation: details-show 150ms ease-in-out;
//}

details[open] {
  .panel {
    //transform: scaleY(1);
    // transition: all 300ms cubic-bezier(0.7, -0.4, 0.4, 1.4);
    animation: append-animate-panel 300ms cubic-bezier(0.7, -0.4, 0.4, 1.4); // linear
    opacity: 1;
    transform: scaleY(1);
  }
}

details[open] summary {
  sl-icon:not(.opened) {
    // sl-icon.opened
    transform: rotate(90deg);
  }
}

//@keyframes details-show {
//  from {
//    opacity: 0;
//    transform: translateY(-0.5em);
//  }
//}
//
//details[open] > *:not(summary) {
//  animation: details-show 150ms ease-in-out;
//}

//details[open] > .panel {
//  opacity: 0;
//  transition: opacity 0.3s ease-in-out; /* Add a smooth transition */
//}
//
///* When details is open, show the content */
//details[open] > .panel {
//  opacity: 1;
//}

.icons {
  display: inline-flex;
  inline-size: auto;
  margin-right: 16px;
  //display: block;
  position: relative;
}

//@keyframes append-animate {
//  from {
//    opacity: 0;
//    transform: scaleY(0);
//  }
//
//  to {
//    opacity: 1;
//    transform: scaleY(1);
//  }
//}

//details[open] > .panel {
//  animation: append-animate 0.3s linear;
//  transform-origin: 50% 0;
//}

.plus {
  opacity: 1;
}

.minus {
  opacity: 0;
}

@keyframes append-animate {
  from {
    opacity: 0.8;
    //transform: scaleY(0);
    transform: rotate(-60deg);
  }

  to {
    opacity: 1;
    //transform: scaleY(1);
    transform: rotate(0deg);
  }
}

@keyframes append-animate-panel {
  from {
    opacity: 0.8;
    transform: scaleY(0);
    //transform: rotate(-60deg);
  }

  to {
    opacity: 1;
    transform: scaleY(1);
    //transform: rotate(0deg);
  }
}

.minus:not(.opened) {
  transform: rotate(90deg);
}

.minus.opened {
  animation: append-animate 100ms linear;
  //transform-origin: 50% 0;
  opacity: 1;
  //transform: rotate(90deg);
}

details[open] {
  .plus {
    opacity: 0;
    transform: rotate(90deg);
  }
}

.animation {
  background-color: #0074d9;
}
