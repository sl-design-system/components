:host {
  --_background: var(--sl-color-tab-default-background);
  --_focus-outline: var(--sl-color-focusring-default) solid var(--sl-border-width-focusring-default);
  --_focus-outline-offset: var(--sl-border-width-focusring-offset);
}

:host {
  display: flex;
  list-style: none;
}

:host([disabled]) {
  summary {
    background-color: #ccc;
  }
}

//:host(:hover) {
//  background-color: var(--sl-color-select-item-hover-background);
//}

details {
  flex: 1;
}

details > summary:first-of-type {
  list-style: none;
}

details > summary:first-of-type::-webkit-details-marker {
  display: none; /* Hides the arrow in Safari */
}

summary {
  background-color: var(--_background);
  border-bottom: 1px solid #c6c6c6; // TODO: change to box-shadow becuse of focus visible border radius???
  cursor: pointer;
  display: flex;
  gap: 8px;
  padding: 8px;
  transition: background 300ms;
  //transition: background 300ms, transform 400ms;
  //transition: transform 400ms;

  &:hover {
    background-color: var(--sl-color-select-item-hover-background);
  }

  &:focus-visible {
    border-radius: 4px; // TODO: change this one in the future
    outline: var(--_focus-outline);
    outline-offset: var(--_focus-outline-offset);
    position: relative;
  }

  sl-icon {
    transition: transform 300ms;
  }
}

.panel {
  padding: 16px;
  transform-origin: top;
  transition: transform 300ms ease-in-out, opacity 300ms ease-in-out;
}

details:not([open]) {
  .panel {
    opacity: 0;
    //padding: 16px;
    transform: scaleY(0);
    //transform-origin: top;
    //transition: transform 300ms ease;
  }
}

//details[open] {
//  .panel {
//    animation: slideDown 200ms linear;
//  }
//}

//details summary > * {
//  display: inline;
//}

//@keyframes flipdown {
//  0% {
//    opacity: 0;
//    transform-origin: top center;
//    transform: rotateX(-90deg);
//  }
//  5% {
//    opacity: 1;
//  }
//  80% {
//    transform: rotateX(8deg);
//  }
//  83% {
//    transform: rotateX(6deg);
//  }
//  92% {
//    transform: rotateX(-3deg);
//  }
//  100% {
//    transform-origin: top center;
//    transform: rotateX(0deg);
//  }
//}

//@keyframes slideDown {
//  0% {
//    opacity: 0.5;
//    transform: translateY(-10px);
//  }
//
//  50% {
//    opacity: 0.8;
//    transform: translateY(-5px);
//  }
//
//  100% {
//    opacity: 1;
//    transform: translateY(0);
//  }
//}

@keyframes details-show {
  from {
    opacity: 0;
    transform: var(--details-translate, translateY(-0.5em));
  }
}

//details[open] > *:not(summary) {
//  animation: details-show 150ms ease-in-out;
//}

details[open] {
  .panel {
    opacity: 1;
    transform: scaleY(1);
  }
}

details[open] summary {
  sl-icon {
    // sl-icon.opened
    transform: rotate(90deg);
  }
}

//@keyframes details-show {
//  from {
//    opacity: 0;
//    transform: translateY(-0.5em);
//  }
//}
//
//details[open] > *:not(summary) {
//  animation: details-show 150ms ease-in-out;
//}

//details[open] > .panel {
//  opacity: 0;
//  transition: opacity 0.3s ease-in-out; /* Add a smooth transition */
//}
//
///* When details is open, show the content */
//details[open] > .panel {
//  opacity: 1;
//}

@keyframes append-animate {
  from {
    opacity: 0;
    transform: scaleY(0);
  }

  to {
    opacity: 1;
    transform: scaleY(1);
  }
}

details[open] > .panel {
  animation: append-animate 0.3s linear;
  transform-origin: 50% 0;
}
