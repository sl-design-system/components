$md-breakpoint: 600px;
$lg-breakpoint: 900px;

:host {
  display: block;
}

dialog {
  --_padding: var(--sl-size-200);

  background: var(--sl-elevation-surface-raised-default);
  border: 0;
  border-radius: var(--sl-size-borderRadius-default) var(--sl-size-borderRadius-default) 0 0;
  color: var(--sl-color-text-plain);
  flex-direction: column;
  margin: auto auto 0;
  max-block-size: calc(100dvh - var(--sl-size-400));
  min-inline-size: 100dvw;
  overflow: visible;
  padding: 0;

  @media (prefers-reduced-motion: no-preference) {
    animation: close-mobile 300ms ease-out forwards;
    transition: display 500ms allow-discrete;

    @media (width > 600px) {
      animation: close-desktop 200ms ease-out forwards;

      &::backdrop {
        animation: hide-backdrop 200ms ease-out forwards;
      }
    }

    &[open] {
      animation: open-mobile 500ms ease-in forwards;

      @media (width > 600px) {
        animation: open-desktop 500ms ease-in forwards;

        &::backdrop {
          animation: show-backdrop 500ms ease-in forwards;
        }
      }
    }
  }

  @media (width > 600px) {
    --_padding: var(--sl-size-300);

    border-radius: var(--sl-size-borderRadius-default);
    margin: auto;
    max-inline-size: calc(100dvw - var(--sl-size-600));
    min-inline-size: auto;
  }

  &:focus-visible {
    outline: var(--sl-color-border-focused) solid var(--sl-size-outlineWidth-default);
    outline-offset: var(--sl-size-outlineOffset-default);
  }

  &[open] {
    display: flex;
  }
}

[part='header'] {
  align-items: start;
  display: flex;
  justify-content: space-between;
  padding-block-start: var(--_padding);
  padding-inline: var(--_padding);
}

[part='titles'] {
  align-items: start;
  display: flex;
  flex: 1;
  flex-direction: column;
}

slot[name='title'] {
  font-size: 1.7em;
  font-weight: var(--sl-text-typeset-fontWeight-demibold);
  line-height: 1.42em;

  &::slotted(*) {
    margin: 0;
    text-wrap: balance;
  }
}

slot[name='subtitle'] {
  font-size: 1.15em;
  font-weight: var(--sl-text-typeset-fontWeight-demibold);

  &::slotted(*) {
    margin: 0;
  }
}

[part='header-bar'] {
  flex-shrink: 0;
}

[part='body'] {
  overflow: auto;
  padding-block: var(--_padding);
  padding-inline: var(--_padding);
}

[part='footer'] {
  padding-block-end: var(--_padding);
  padding-inline: var(--_padding);
}

[part='footer-bar'] {
  align-items: stretch;
  flex-direction: column-reverse;

  @media (width > 600px) {
    align-items: center;
    flex-direction: row;
  }
}

// // This is for the non-mobile styling. The default styling is for mobile.
// @media (min-width: $md-breakpoint) {
//   :host {
//     --_body-gap: var(--sl-space-dialog-desktop-body-gap);
//     --_border-radius: var(--sl-border-radius-dialog-desktop);
//     --_margin-bottom-container: var(--sl-space-dialog-desktop-container-padding-bottom);
//     --_margin-container-inline: var(--sl-space-dialog-desktop-container-inline);
//     --_margin-top-container: var(--sl-space-dialog-desktop-container-padding-top);
//     --_max-inline-size: var(
//       --sl-dialog-max-inline-size,
//       calc(100dvw - var(--sl-space-dialog-desktop-container-inline) * 2)
//     );
//     --_padding-block: var(--sl-space-dialog-desktop-body-block);
//     --_padding-inline: var(--sl-space-dialog-desktop-body-inline);
//   }

//   dialog {
//     inline-size: fit-content;
//     margin: auto;
//     max-block-size: min(
//       100% - var(--_margin-top-container) - var(--_margin-bottom-container) - 2 * var(--_padding-block)
//     );
//     max-inline-size: min(
//       var(--_max-inline-size),
//       100% - 2 * var(--_margin-container-inline) - 2 * var(--_padding-inline)
//     );
//     min-inline-size: var(--_min-inline-size);
//   }
// }

@keyframes show-backdrop {
  0% {
    opacity: 0;
  }

  50% {
    opacity: 0.75;
  }

  100% {
    opacity: 1;
  }
}

@keyframes hide-backdrop {
  from {
    opacity: 1;
  }

  to {
    opacity: 0;
  }
}

@keyframes open-desktop {
  from {
    filter: blur(10px);
    opacity: 0;
    scale: 1.1;
  }

  to {
    filter: blur(0);
    opacity: 1;
    scale: 1;
  }
}

@keyframes close-desktop {
  from {
    display: flex;
    opacity: 1;
    scale: 1;
  }

  to {
    opacity: 0;
    scale: 0.9;
  }
}

@keyframes open-mobile {
  from {
    translate: 0 100%;
  }

  to {
    translate: 0;
  }
}

@keyframes close-mobile {
  from {
    display: flex;
    translate: 0;
  }

  to {
    translate: 0 100%;
  }
}
