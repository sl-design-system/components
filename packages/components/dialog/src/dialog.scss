$md-breakpoint: 600px;
$lg-breakpoint: 900px;

:host {
  display: block;
}

dialog {
  background: var(--sl-elevation-surface-raised-default);
  border: 0;
  border-radius: var(--sl-size-borderRadius-default);
  box-sizing: border-box;
  color: var(--sl-color-foreground-plain);
  flex-direction: column;
  margin: auto auto 0;
  max-block-size: calc(100dvh - var(--sl-size-400));
  min-inline-size: 100dvw;
  overflow: visible;
  padding: 0;

  &[open] {
    display: flex;
  }

  @media (width > 600px) {
    margin: auto;
    max-inline-size: calc(100dvw - var(--sl-size-600));
    min-inline-size: auto;

    @starting-style {
      display: flex;
      scale: 1.1;
    }

    &:not(:modal) {
      scale: 0.7;
    }
  }

  &:focus-visible {
    outline: var(--sl-color-border-focused) solid var(--sl-size-outlineWidth-default);
    outline-offset: var(--sl-size-outlineOffset-default);
  }
}

@media (width <= 600px) {
  @media (prefers-reduced-motion: no-preference) {
    dialog,
    dialog::backdrop {
      transition: 0.2s ease-in-out;
      transition-behavior: allow-discrete;
      transition-property: display, opacity, overlay, translate;

      @supports not (overlay: auto) {
        transition-duration: 0s;
      }
    }
  }

  dialog {
    border: 0;
    border-radius: var(--sl-size-borderRadius-default) var(--sl-size-borderRadius-default) 0 0;

    // Exit animation
    &:not(:modal) {
      translate: 0 100%;
    }

    // Enter animation
    @starting-style {
      display: flex;
      translate: 0 100%;
    }
  }

  dialog::backdrop {
    opacity: 0;
  }

  dialog[open]::backdrop {
    opacity: 1;
    transition-duration: 0.5s;

    @starting-style {
      opacity: 0;
    }
  }
}

// dialog,
// dialog::backdrop {
//   @media (prefers-reduced-motion: no-preference) {
//     transition: 0.2s ease-in-out;
//     transition-behavior: allow-discrete;
//     transition-property: display, opacity, overlay, scale, translate;
//   }

//   @supports not (overlay: auto) {
//     transition-duration: 0s;
//   }
// }

// dialog[open],
// dialog[open]::backdrop {
//   opacity: 1;
//   transition-duration: 0.5s;

//   @starting-style {
//     opacity: 0;
//   }
// }

[part='header'] {
  align-items: start;
  display: flex;
  justify-content: space-between;
  padding-block-start: var(--sl-size-300);
  padding-inline: var(--sl-size-300);
}

[part='titles'] {
  align-items: start;
  display: flex;
  flex: 1;
  flex-direction: column;
}

slot[name='title'] {
  font-size: 1.7em;
  font-weight: var(--sl-text-typeset-fontWeight-demibold);
  line-height: 1.42em;

  &::slotted(*) {
    margin: 0;
    padding-inline-end: calc(var(--sl-size-450) / 2);
    text-box: trim-both cap alphabetic;
    text-wrap: balance;
  }
}

slot[name='subtitle'] {
  font-size: 1.15em;
  font-weight: var(--sl-text-typeset-fontWeight-demibold);

  &::slotted(*) {
    margin: 0;
  }
}

sl-button {
  inset: var(--sl-size-100) var(--sl-size-100) auto auto;
  position: absolute;
}

[part='body'] {
  overflow: auto;
  padding: var(--sl-size-200) var(--sl-size-300);
}

[part='footer'] {
  padding-block-end: var(--sl-size-300);
  padding-inline: var(--sl-size-300);
}

[part='footer-bar'] {
  align-items: stretch;
  flex-direction: column;

  @media (width > 600px) {
    align-items: center;
    flex-direction: row;
  }
}
