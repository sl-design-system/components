:host {
  --_border-color: var(--sl-color-tag-subtle-idle-border);
  --_gap: var(--sl-space-tag-list-md);
  --_group-font: var(--sl-text-tag-label-md);
  --_group-margin: calc(var(--_group-space) * 4);
  --_group-margin-more: calc(var(--_group-space) * 2);
  --_group-space: var(--sl-space-tag-counter-gap);
  --_group-width: var(--sl-size-tag-counter);

  display: flex;
  gap: var(--_gap);
}

:host([stacked]) {
  flex-wrap: nowrap;

  .list {
    align-content: flex-end;
    flex-wrap: nowrap;
    overflow: hidden;
  }
}

:host([emphasis='bold']) {
  --_border-color: var(--sl-color-tag-bold-idle-border);
}

::slotted(*) {
  flex-shrink: 0;
}

.stack {
  display: flex;
  position: relative;

  &.double {
    padding-inline-start: 2px;
  }

  &.triple {
    padding-inline-start: 4px;
  }

  &:has(sl-tag:focus) {
    --_border-color: var(--sl-color-tag-subtle-active-border);
  }

  &:has(sl-tag[emphasis='bold']:focus) {
    --_border-color: var(--sl-color-tag-subtle-active-border);
  }
}

.double::before,
.triple::before,
.triple::after {
  border-color: var(--_border-color);
  border-end-start-radius: var(--sl-border-radius-default);
  border-inline-start: calc(var(--_group-width) * 0.45) solid var(--_border-color);
  border-start-start-radius: var(--sl-border-radius-default);
  content: '';
  display: flex;
  inset: 0 auto 0 2px;
  position: absolute;
}

.triple::after {
  inset-inline-start: 0;
}

.list {
  display: flex;
  flex-wrap: wrap;
  gap: var(--_gap);
}
