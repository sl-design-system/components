:host {
  --_gap: var(--sl-space-tag-list-md);
  --_group-font: var(--sl-text-tag-label-md);
  --_group-margin: calc(var(--_group-space) * 4);
  --_group-margin-more: calc(var(--_group-space) * 2);
  --_group-space: var(--sl-space-tag-counter-gap);
  --_group-width: var(--sl-size-tag-counter);

  display: flex;
  flex-shrink: 0;
  flex-direction: row;
  flex-flow: column;
  gap: var(--sl-space-tag-list-md);
}

:host([stacked]) {
  flex-flow: nowrap;

  .list {
    display: flex;
    overflow: hidden;
    gap: var(--_gap);
    align-content: flex-end;
    flex-wrap: nowrap;
  }
}

:host([size='md']) {
  --_group-padding: var(--sl-space-tag-block-md) var(--sl-space-tag-inline-md);
  --_stacked-height: var(--sl-size-tag-md);
}

:host([size='lg']) {
  --_group-padding: var(--sl-space-tag-block-lg) var(--sl-space-tag-inline-lg);
  --_stacked-height: var(--sl-size-tag-lg);
}

.group {
  display: block;

  sl-tag {
    position: relative;
    padding: var(--_group-padding);
    font: var(--_group-font);

    &:not([label='1']) {
      margin-left: calc(var(--_group-margin-more) * -1);
    }

    &:not([label='1'])::before {
      left: var(--_group-margin-more);
    }

    &:not([label='1'], [label='2']) {
      margin-left: calc(var(--_group-margin) * -1);
    }

    &:not([label='1'], [label='2'])::after {
      left: var(--_group-margin);
    }

    &:not([label='1'])::before,
    &:not([label='1'], [label='2'])::after {
      position: absolute;
      content: '';
      width: 100%;
      height: 100%;
      border-left: calc(var(--_group-width) * 0.45) solid var(--_border-color);
      border-radius: var(--sl-border-radius-default);
    }
  }

  sl-tag[emphasis='subtle'] {
    &:not([label='1'])::before,
    &:not([label='1'], [label='2'])::after {
      --_border-color: var(--sl-color-tag-subtle-idle-border);
    }
  }

  sl-tag[emphasis='bold'] {
    &:not([label='1'])::before,
    &:not([label='1'], [label='2'])::after {
      --_border-color: var(--sl-color-tag-bold-idle-border);
    }
  }

  sl-tag[emphasis='subtle']:focus {
    &:not([label='1'])::before,
    &:not([label='1'], [label='2'])::after {
      --_border-color: var(--sl-color-tag-subtle-active-border);
    }
  }

  sl-tag[emphasis='bold']:focus {
    &:not([label='1'])::before,
    &:not([label='1'], [label='2'])::after {
      --_border-color: var(--sl-color-tag-bold-active-border);
    }
  }
}

.list {
  display: flex;
  flex-wrap: wrap;
  gap: var(--_gap);
}
