:host {
  --_bg-color: transparent;
  --_bg-mix-color: var(--sl-color-background-neutral-interactive-plain);
  --_bg-opacity: var(--sl-opacity-interactive-plain-idle);

  align-items: center;
  color: var(--sl-color-foreground-plain);
  display: flex;
  outline: 0;
  padding-inline-start: var(--sl-size-050);
  scroll-margin-block: var(--sl-size-100);
}

:host([aria-expanded='true']) sl-icon {
  rotate: 90deg;
}

:host(:focus-visible) [role='gridcell'] {
  outline-color: var(--sl-color-border-focused);
  z-index: 1;
}

:host(:where(:focus-visible, :focus-within)) {
  sl-button-bar {
    display: flex;
  }
}

:host([disabled]) {
  color: var(--sl-color-foreground-disabled);
  cursor: default;
  pointer-events: none;
}

:host([selects]) [role='gridcell'] {
  cursor: pointer;

  &:hover {
    --_bg-opacity: var(--sl-opacity-interactive-plain-hover);

    @media (hover: hover) {
      sl-button-bar {
        display: flex;
      }
    }
  }

  &:active {
    --_bg-opacity: var(--sl-opacity-interactive-plain-active);
  }
}

:host([selects='single'][selected]) [role='gridcell'] {
  --_bg-color: var(--sl-color-background-selected-subtlest);
  --_bg-mix-color: var(--sl-color-background-selected-interactive-plain);
  --_bg-opacity: var(--sl-opacity-interactive-plain-idle);

  &:hover {
    --_bg-opacity: var(--sl-opacity-interactive-plain-hover);
  }

  &:active {
    --_bg-opacity: var(--sl-opacity-interactive-plain-active);
  }
}

sl-indent-guides {
  align-self: stretch;
  margin-block: calc(var(--sl-size-025) * -1);
}

[role='gridcell'] {
  --_bg-color: transparent;
  --_bg-mix-color: var(--sl-color-background-neutral-interactive-plain);
  --_bg-opacity: var(--sl-opacity-interactive-plain-idle);

  align-items: center;
  background: color-mix(in srgb, var(--_bg-color), var(--_bg-mix-color) calc(100% * var(--_bg-opacity)));
  border-radius: var(--sl-size-borderRadius-default);
  display: flex;
  inline-size: 100%;
  outline: transparent solid var(--sl-size-borderWidth-focusRing);
  position: relative;

  @media (prefers-reduced-motion: no-preference) {
    transition: background 200ms ease-in-out;
  }

  &:focus-visible {
    outline-color: var(--sl-color-border-focused);
    z-index: 1;

    sl-button-bar {
      display: flex;
    }
  }
}

.expander {
  --_bg-color: transparent;
  --_bg-mix-color: var(--sl-color-background-neutral-interactive-plain);
  --_bg-opacity: var(--sl-opacity-interactive-bold-idle);

  align-items: center;
  align-self: center;
  background: color-mix(in srgb, var(--_bg-color), var(--_bg-mix-color) calc(100% * var(--_bg-opacity)));
  block-size: var(--sl-size-300);
  border-radius: var(--sl-size-borderRadius-default);
  cursor: pointer;
  display: inline-flex;
  inline-size: var(--sl-size-300);
  justify-content: center;
  margin-inline-end: var(--sl-size-025);
  user-select: none;

  sl-icon {
    color: var(--sl-color-foreground-bold);
  }

  &:hover {
    --_bg-mix-color: var(--sl-color-background-neutral-interactive-plain);
    --_bg-opacity: var(--sl-opacity-interactive-bold-hover);

    @media (prefers-reduced-motion: no-preference) {
      transition: background 200ms ease-in-out;
    }
  }

  + [part='wrapper'] {
    padding-inline-start: 0;
  }
}

[part='wrapper'] {
  align-items: center;
  display: flex;
  flex: 1;
  gap: var(--sl-size-075);
  justify-content: space-between;
  padding-inline: calc(var(--sl-size-300) + var(--sl-size-025)) var(--sl-size-050);
}

[part='content'] {
  align-items: center;
  display: flex;
  gap: var(--sl-size-025);
  padding-block: var(--sl-size-075);
  padding-inline: 0 var(--sl-size-100);
}

::slotted(sl-icon) {
  vertical-align: bottom;
}

sl-icon {
  rotate: 0deg;

  @media (prefers-reduced-motion: no-preference) {
    transition: rotate 100ms ease-in-out;
  }
}

sl-checkbox {
  align-items: center;
  gap: var(--sl-size-075);
  padding-block: var(--sl-size-075);

  &::part(label) {
    align-items: center;
    display: inline-flex;
    gap: var(--sl-size-025);
    margin: 0;
  }
}

sl-button-bar {
  display: none;
  margin-inline-start: auto;
}

sl-skeleton {
  block-size: 1lh;
}
